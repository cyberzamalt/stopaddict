/* web/css/app.css — Style compact "app mobile" */

/* ---------- Reset & base ---------- */
* { box-sizing: border-box; }
html, body { height: 100%; }
:root{
  --bg: #0a1020;
  --bg2: #040811;
  --surface: #0f172a;
  --surface2:#0c1222;
  --border: #1f2b48;
  --border2:#233355;
  --accent:#35518a;
  --text: #eaf0ff;
  --muted:#c6d7ff;
}
body{
  margin:0;
  color:var(--text);
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 600px at 50% -10%, #13214a 0%, transparent 60%), linear-gradient(180deg, var(--bg), var(--bg2));
  padding: 20px 12px;
}
.hide{ display:none !important; }

/* ---------- Cadre "téléphone" (sans changer le HTML) ---------- */
body > header.app-header,
body > nav.tabs,
body > main.pages{
  width:100%;
  max-width:420px;          /* largeur type smartphone */
  margin:0 auto;
  background:var(--surface);
}

/* Arrondis & bordures partagées pour l’illusion d’un seul bloc */
body > header.app-header{
  border:1px solid var(--border);
  border-bottom:none;
  border-radius:20px 20px 0 0;
  background: linear-gradient(180deg,#111a33, var(--surface) 70%);
}
body > nav.tabs{
  border-left:1px solid var(--border);
  border-right:1px solid var(--border);
}
body > main.pages{
  border:1px solid var(--border);
  border-top:none;
  border-radius:0 0 20px 20px;
  box-shadow: 0 18px 40px rgba(0,0,0,.35);
}

/* ---------- Boutons ---------- */
.btn{
  border:0;
  padding:.55rem .9rem;
  border-radius:.6rem;
  background:#1e293b;
  color:var(--text);
  cursor:pointer;
  transition:transform .05s ease, background .2s ease, opacity .2s;
}
.btn:hover{ background:#273449; }
.btn:active{ transform: translateY(1px); }
.btn.small{ padding:.4rem .65rem; font-size:.9rem; }

/* ---------- En-tête ---------- */
.app-header{
  display:grid;
  grid-template-columns:1fr auto;
  align-items:center;
  padding:1rem 1.1rem .85rem;
}
.header-left h1{ margin:0 0 .25rem 0; font-size:1.15rem; }
.date-line{ display:flex; align-items:center; gap:.5rem; opacity:.9; font-size:.95rem; }
.status-dot{
  display:inline-flex; align-items:center; justify-content:center;
  width:1.15rem; height:1.15rem; border-radius:50%;
  background:#1f2b48; color:#cce3ff; font-weight:700; font-size:.85rem;
}
.kpis{ display:flex; align-items:center; gap:.4rem; }
.kpi{
  background:var(--surface2);
  border:1px solid var(--border);
  padding:.35rem .55rem;
  border-radius:.5rem;
  display:flex; align-items:center; gap:.4rem;
  font-size:.95rem;
}

/* ---------- Onglets ---------- */
.tabs{
  display:flex; gap:.35rem;
  padding:.45rem .6rem;
  position:sticky; top:0; z-index:9;
  background:var(--surface);
  border-bottom:1px solid var(--border);
}
.tab{
  background:transparent; color:#cde2ff; border:0;
  padding:.55rem .85rem; cursor:pointer; border-radius:.55rem; font-weight:600;
}
.tab.active{ background:#15213a; color:#fff; border:1px solid #253154; }

/* ---------- Pages ---------- */
.pages{ padding:.9rem .9rem 1.1rem; }

/* ---------- Grille compteurs ---------- */
.counters-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:.8rem;
}
@media (max-width:430px){ .counters-grid{ grid-template-columns:1fr; } }

.counter-card{
  background:var(--surface2);
  border:1px solid var(--border);
  border-radius:1rem;
  padding:.85rem;
  display:flex; flex-direction:column; gap:.6rem;
  min-height:160px;
}
.counter-card h2{ margin:0; font-size:1.05rem; color:#f2f7ff; }
.ctr-row{
  display:grid; grid-template-columns:44px 1fr 44px;
  align-items:center; gap:.6rem;
}
.ctr-val{
  background:#0b1020; border:1px dashed #2a3a61;
  padding:.5rem; text-align:center; border-radius:.6rem;
  font-size:1.2rem; font-weight:700;
}
.toggle{ display:flex; align-items:center; gap:.5rem; color:var(--muted); font-size:.95rem; }

/* Désactivation visuelle d’un compteur */
.counter-card[aria-disabled="true"]{ opacity:.55; pointer-events:none; }

/* ---------- Conseils ---------- */
.tips-panel{ margin-top:1rem; }
.tips-card{
  background:var(--surface2);
  border:1px solid var(--border);
  border-radius:1rem; padding:.9rem;
}
.tips-card h3{ margin:0 0 .55rem 0; }
.tip-line{
  padding:.35rem .5rem;
  background:#0b1220;
  border:1px dashed #24365f;
  border-radius:.5rem;
  margin-bottom:.4rem;
}

/* ---------- Stats ---------- */
.kpi-block{ display:flex; align-items:baseline; gap:1rem; margin:.4rem 0 1rem 0; }
.chart-actions{ display:flex; flex-wrap:wrap; gap:.5rem; margin-bottom:.8rem; }
.chart-block{
  background:var(--surface2);
  border:1px solid var(--border);
  border-radius:1rem; padding:.5rem; height:360px;
}
#chart-main{ width:100%; height:100%; }

/* ---------- Calendrier ---------- */
.calendar-toolbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:.5rem; margin-bottom:.7rem; flex-wrap:wrap;
}
.toolbar-left{ display:flex; align-items:center; gap:.5rem; }
.cal-title{ min-width:180px; text-align:center; font-weight:700; }
.toolbar-center .active{ outline:1px solid #2a3a61; }
.cal-filters label{ display:inline-flex; align-items:center; gap:.25rem; margin-left:.25rem; }

.cal-grid{
  background:var(--surface2);
  border:1px solid var(--border);
  border-radius:1rem; overflow:hidden;
}
.cal-head{
  display:grid; grid-template-columns:repeat(7,1fr);
  background:#121a2f; border-bottom:1px solid var(--border);
}
.cal-head>div{ padding:.5rem; text-align:center; color:#c9d9ff; font-weight:600; }
.cal-body{ display:grid; grid-template-columns:repeat(7,1fr); }
.cal-cell{
  min-height:90px; border-right:1px solid #1a2744; border-bottom:1px solid #1a2744;
  padding:.4rem; position:relative;
}
.cal-cell:nth-child(7n){ border-right:0; }
.cal-other{ opacity:.45; }
.cal-today{ outline:2px solid var(--accent); outline-offset:-2px; }
.cal-day{ font-weight:700; color:#f2f7ff; }
.cal-mini{ position:absolute; right:.4rem; bottom:.4rem; display:flex; gap:.25rem; }
.mini-dot{ display:inline-block; padding:.05rem .35rem; border-radius:.5rem; background:#1f2b48; }
.mini-euro{ display:inline-block; padding:.05rem .3rem; border-radius:.5rem; border:1px solid #2a3a61; }

.cal-row{ display:grid; grid-template-columns:repeat(7,1fr); gap:.6rem; }
.cal-cell.week{ min-height:120px; border:1px solid var(--border); border-radius:.6rem; background:var(--surface2); padding:.6rem; }
.cal-breakdown{ display:flex; flex-wrap:wrap; gap:.35rem; margin-top:.4rem; }

.cal-dayview .cal-box{
  background:var(--surface2);
  border:1px solid var(--border);
  border-radius:1rem; padding:.9rem;
}
.cal-box h4{ margin:.2rem 0 .6rem 0; }
.cal-summary{ display:grid; grid-template-columns:repeat(4,1fr); gap:.45rem; }
@media(max-width:430px){ .cal-summary{ grid-template-columns:repeat(2,1fr); } }
.cal-summary>div{
  background:#0b1020; border:1px dashed #24365f;
  padding:.5rem; border-radius:.5rem; text-align:center;
}
.cal-details{ margin-top:.7rem; }
.cal-links{ display:flex; gap:.5rem; margin-top:.7rem; }

/* ---------- Habits & Settings ---------- */
.section-title{ margin:1rem 0 .6rem 0; font-size:1.05rem; }
.grid-2{ display:grid; grid-template-columns:repeat(2,1fr); gap:.65rem; }
@media (max-width:430px){ .grid-2{ grid-template-columns:1fr; } }
.grid-2 label{
  display:flex; align-items:center; justify-content:space-between; gap:.6rem;
  background:var(--surface2); border:1px solid var(--border);
  padding:.6rem .7rem; border-radius:.6rem;
}
.grid-2 input, .grid-2 select{
  width:140px; padding:.45rem .55rem; border-radius:.5rem;
  border:1px solid #2a3a61; background:#0b1020; color:var(--text);
}
.actions{ display:flex; flex-wrap:wrap; gap:.5rem; margin:.7rem 0; }
.actions .btn{ margin-right:.1rem; }

/* ---------- Dialogs (âge + ressources) ---------- */
dialog{
  border:0; border-radius:1rem;
  background:#0b1020; color:var(--text);
}
dialog::backdrop{ background: rgba(2,6,23,.55); }
.agegate{ min-width:260px; padding:1rem; display:grid; gap:.6rem; }
.agegate h3{ margin:0; }
.agegate .actions{ justify-content:flex-end; }

/* ---------- Console debug ---------- */
#debug-console{
  margin-top:.6rem; padding:.6rem; height:160px; overflow:auto;
  background:#0b1020; border:1px solid var(--border2); border-radius:.6rem;
}
.debug-line{
  font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
  font-size:.85rem;
}

/* ---------- Petits helpers ---------- */
.kpis, .actions, .grid-2{ gap:.65rem; }
