/* web/css/app.css — Look & feel “app” (cadre smartphone) + styles UI */

/* ---------- Variables ---------- */
:root{
  --bg: #0b1020;
  --bg-2: #0f172a;
  --surface: #0c1222;
  --surface-2:#111a33;
  --border:#1f2b48;
  --border-2:#233355;
  --text:#eaf0ff;
  --text-dim:#c6d7ff;
  --accent:#35518a;
  --btn:#1e293b;
  --btn-hover:#273449;

  --app-w: 430px;  /* largeur “téléphone” */
  --radius: 16px;
  --shadow: 0 10px 20px rgba(0,0,0,.35);
}

/* ---------- Base ---------- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--text);
  background: radial-gradient(80% 80% at 10% 0%, #0a1331 0%, #060a18 60%, #03060f 100%);
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
}

/* Utilitaires */
.hide{display:none!important}
.small{font-size:.9rem}

/* ---------- Cadre “app” (sans wrapper HTML) ---------- */
/* On donne l’illusion d’un téléphone en posant header/nav/main dans un même cadre */
header.app-header, nav.tabs, main.pages{
  width: min(100%, var(--app-w));
  margin-left:auto;margin-right:auto;
  border-left:1px solid var(--border);
  border-right:1px solid var(--border);
  background: var(--bg-2);
}
header.app-header{
  margin-top: 18px;
  border-top:1px solid var(--border);
  border-radius: var(--radius) var(--radius) 0 0;
  box-shadow: var(--shadow);
}
nav.tabs{
  border-top:0;
  border-bottom:1px solid var(--border);
  border-radius: 0;
}
main.pages{
  border-top:0;
  border-bottom:1px solid var(--border);
  border-radius: 0 0 var(--radius) var(--radius);
  box-shadow: var(--shadow);
  background: transparent;
  padding-bottom: 1rem;
}

/* ---------- Header ---------- */
.app-header{
  display:grid;grid-template-columns:1fr auto;align-items:center;
  padding:1rem 1.2rem;
  background: linear-gradient(180deg, var(--surface-2), var(--bg-2) 70%);
}
.header-left h1{margin:0 0 .25rem 0;font-size:1.25rem}
.date-line{display:flex;align-items:center;gap:.5rem;opacity:.9}
.status-dot{
  display:inline-flex;align-items:center;justify-content:center;
  width:1.15rem;height:1.15rem;border-radius:50%;
  background:#1f2b48;color:#cce3ff;font-weight:700;font-size:.85rem
}
.kpis{display:flex;align-items:center;gap:.35rem;flex-wrap:wrap}
.kpi{
  background:var(--surface);
  border:1px solid var(--border);
  padding:.35rem .55rem;border-radius:.55rem;display:flex;align-items:center;gap:.35rem
}

/* ---------- Tabs ---------- */
.tabs{
  display:flex;gap:.35rem;padding:.45rem .7rem;
  background:var(--bg-2);
  position:sticky;top:0;z-index:20;
}
.tab{
  background:transparent;color:#cde2ff;border:1px solid transparent;
  padding:.55rem .85rem;cursor:pointer;border-radius:.55rem;font-weight:600
}
.tab:hover{background:#14213a}
.tab.active{background:#15213a;color:#fff;border-color:#253154}

/* ---------- Pages ---------- */
.pages{padding:1rem}

/* ---------- Boutons & inputs ---------- */
.btn{
  border:0;padding:.55rem .9rem;border-radius:.6rem;
  background:var(--btn);color:var(--text);cursor:pointer;
  transition:transform .05s ease, background .2s ease
}
.btn:hover{background:var(--btn-hover)}
.btn:active{transform:translateY(1px)}
input, select, textarea{
  background:#0b1020;color:var(--text);border:1px solid #2a3a61;border-radius:.5rem;
  padding:.45rem .55rem
}
label.toggle{display:flex;align-items:center;gap:.5rem;color:var(--text-dim);font-size:.95rem}

/* ---------- Compteurs (Accueil) ---------- */
.counters-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:.9rem}
@media (max-width:1100px){.counters-grid{grid-template-columns:repeat(3,1fr)}}
@media (max-width:700px){.counters-grid{grid-template-columns:1fr 1fr}}
@media (max-width:440px){.counters-grid{grid-template-columns:1fr}}
.counter-card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:1rem;padding:.9rem;display:flex;flex-direction:column;gap:.6rem;min-height:160px
}
.counter-card h2{margin:0;font-size:1.05rem;color:#f2f7ff}
.ctr-row{display:grid;grid-template-columns:44px 1fr 44px;align-items:center;gap:.6rem}
.ctr-val{
  background:#0b1020;border:1px dashed #2a3a61;padding:.5rem;
  text-align:center;border-radius:.6rem;font-size:1.2rem;font-weight:700
}

/* ---------- Tips (Conseils) ---------- */
.tips-panel{margin-top:1rem}
.tips-card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:1rem;padding:.9rem
}
.tips-card h3{margin:0 0 .5rem 0}
.tip-line{
  padding:.35rem .5rem;
  background:#0b1220;border:1px dashed #24365f;border-radius:.5rem;
  margin-bottom:.4rem
}

/* ---------- Stats ---------- */
.kpi-block{display:flex;align-items:baseline;gap:1rem;margin:.4rem 0 1rem 0}
.chart-actions{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.8rem}
.chart-block{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:1rem;padding:.6rem;height:360px;margin-bottom:.8rem
}
#chart-main,#chart-costs{width:100%;height:100%}

/* ---------- Calendrier (vue type monolith) ---------- */
.calendar-toolbar{
  display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-bottom:.7rem;flex-wrap:wrap
}
.toolbar-left{display:flex;align-items:center;gap:.5rem}
.cal-title{min-width:180px;text-align:center;font-weight:700}
.toolbar-center .active{outline:1px solid #2a3a61}
.cal-filters label{display:inline-flex;align-items:center;gap:.25rem;margin-left:.25rem}

.cal-grid{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:1rem;overflow:hidden
}
.cal-head{
  display:grid;grid-template-columns:repeat(7,1fr);
  background:#121a2f;border-bottom:1px solid var(--border)
}
.cal-head>div{padding:.5rem;text-align:center;color:#c9d9ff;font-weight:600}
.cal-body{display:grid;grid-template-columns:repeat(7,1fr)}
.cal-cell{
  min-height:90px;border-right:1px solid #1a2744;border-bottom:1px solid #1a2744;
  padding:.45rem;position:relative
}
.cal-cell:nth-child(7n){border-right:0}
.cal-other{opacity:.45}
.cal-today{outline:2px solid var(--accent);outline-offset:-2px}
.cal-day{font-weight:700;color:#f2f7ff}
.cal-mini{position:absolute;right:.4rem;bottom:.4rem;display:flex;gap:.25rem}
.mini-dot{display:inline-block;padding:.05rem .35rem;border-radius:.5rem;background:#1f2b48}
.mini-euro{display:inline-block;padding:.05rem .3rem;border-radius:.5rem;border:1px solid #2a3a61}

.cal-details{margin-top:.7rem}
.cal-details .cal-box{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:1rem;padding:.9rem
}
.cal-links{display:flex;gap:.5rem;margin-top:.7rem}

/* ---------- Habitudes & Réglages ---------- */
.section-title{margin:1rem 0 .6rem 0;font-size:1.05rem}
.grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:.6rem}
@media (max-width:720px){.grid-2{grid-template-columns:1fr}}
.grid-2 label{
  display:flex;align-items:center;justify-content:space-between;gap:.6rem;
  background:var(--surface);border:1px solid var(--border);padding:.6rem .7rem;border-radius:.6rem
}
.actions{display:flex;flex-wrap:wrap;gap:.5rem;margin:.7rem 0}

/* ---------- Dialog (Age gate + Ressources) ---------- */
dialog{
  border:0;border-radius:1rem;background:#0b1020;color:var(--text);
  box-shadow: var(--shadow);
}
dialog::backdrop{background:rgba(2,6,23,.55)}
.agegate{min-width:280px;padding:1rem;display:grid;gap:.6rem}
.agegate h3{margin:0}
.agegate .actions{justify-content:flex-end}

/* ---------- Debug ---------- */
#debug-console{
  margin-top:.6rem;padding:.6rem;height:160px;overflow:auto;
  background:#0b1020;border:1px solid var(--border-2);border-radius:.6rem
}
.debug-line{
  font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
  font-size:.85rem
}

/* ---------- Accessibilité ---------- */
:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
