/* =========================
   StopAddict — Addons UI
   ========================= */

/* Thème (si variables manquent) */
:root{
  --bg:#0b1220; --panel:#0f172a; --panel-2:#111a2d;
  --border:#24324a; --text:#e6ecff; --muted:#9fb0d1; --accent:#3b82f6;
}

/* Layouts génériques */
.card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:1rem;margin:.6rem 0;}
.panel h3{margin:.1rem 0 .6rem 0;color:var(--text);font-weight:600}
.flex{display:flex;gap:.6rem;align-items:center;flex-wrap:wrap;}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:.6rem;}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:.6rem;}
.grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:.6rem;}
label{display:flex;flex-direction:column;gap:.25rem;color:var(--text);}
input,select,button{background:var(--panel-2);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:.5rem .6rem;}
button{cursor:pointer;}
.file-btn{position:relative;overflow:hidden;display:inline-flex;align-items:center;gap:.4rem;padding:.5rem .8rem;background:var(--panel-2)}
.file-btn input[type="file"]{position:absolute;inset:0;opacity:0;cursor:pointer}

/* Accueil — chips d’activation & état inactif */
.activation-row{display:flex;flex-wrap:wrap;gap:.4rem;margin:.4rem 0;}
.activation-row button{transition:transform .12s ease, opacity .12s ease;}
.activation-row button:active{transform:scale(.98)}
.disabled{opacity:.45;filter:grayscale(.3);pointer-events:none}

/* Console intégrée */
#console-content{background:#070b16;border:1px solid var(--border);border-radius:10px;padding:.6rem;white-space:pre-wrap;overflow:auto;max-height:40vh;color:#d7e1ff;}
#console-tools{display:flex;gap:.4rem;margin:.4rem 0;}

/* Dialogs (identité, fiche jour…) */
dialog{border:none;border-radius:14px;background:var(--panel);color:var(--text);max-width:min(560px,90vw);max-height:min(80vh,100%);padding:1rem;overflow:auto;box-shadow:0 10px 40px #0008;z-index:9999}
dialog::backdrop{background:#000c}
.day-dialog{background:var(--panel);border:none;border-radius:12px;padding:1rem;color:var(--text);}

/* Calendrier */
.calendar-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem;}
.calendar-header h3{margin:0;color:var(--text);font-weight:600}
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:.3rem;}
.dow{color:var(--muted);text-align:center;font-size:.9rem;padding:.2rem 0;}
.day{background:var(--panel);border:1px solid var(--border);padding:.4rem;border-radius:8px;cursor:pointer;position:relative;min-height:64px;}
.day:hover{outline:1px solid var(--accent);}
.day .num{font-weight:600;color:var(--text);}
.day.today{outline:2px solid var(--accent);}
.badge{position:absolute;top:.25rem;right:.25rem;background:var(--accent);color:#fff;font-size:.65rem;border-radius:6px;padding:2px 6px}
.badge.stop{background:#f44336;}
.badge.follow{background:#03a9f4;}
.badge.milestone{background:#4caf50;}

/* Stats — légende Chart.js lisible sur fond sombre */
.chartjs-render-monitor, canvas{background:transparent}
:root{--chart-grid:#223;--chart-text:#ccd6f6}
.chart-dark .chartjs-size-monitor{color:var(--chart-text)}

/* Z-index (panneaux au-dessus) */
#settings-root, #debug-section, dialog{z-index:9999;position:relative}

/* Accessibilité / préférences */
@media (prefers-reduced-motion: reduce){
  *{animation:none!important;transition:none!important}
}

/* Responsive */
@media (max-width:900px){
  .grid-4{grid-template-columns:1fr 1fr}
}
@media (max-width:700px){
  .grid-3{grid-template-columns:1fr 1fr}
  .grid-2{grid-template-columns:1fr}
  .day{min-height:56px}
}
