<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>StopAddict</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./css/app.css" />
</head>
<body>
  <main>
    <header class="app-header">
      <h1>StopAddict</h1>
      <div class="header-stats">
        <div><strong>Aujourd’hui</strong><span id="todayTotal">—</span></div>
        <div><strong>Semaine</strong><span id="weekTotal">—</span></div>
        <div><strong>Mois</strong><span id="monthTotal">—</span></div>
        <div><strong>Coût jour</strong><span id="todayCost">—</span></div>
      </div>
    </header>

    <!-- Toggles d’activation -->
    <section class="card">
      <h2>Activer ce que tu suis</h2>
      <div class="row">
        <label><input type="checkbox" id="enableCigs"> Je fume</label>
        <label><input type="checkbox" id="enableWeed"> Je fume des joints</label>
        <label><input type="checkbox" id="enableAlcohol"> Je bois</label>
      </div>
      <p class="muted small">Tu peux tout changer quand tu veux. Les modules non activés n’apparaissent pas.</p>
    </section>

    <!-- Cartes Compteurs -->
    <section id="cardCigs" class="card hide">
      <h2>Clopes <span class="pill" id="cigsToday">0</span></h2>
      <div class="row">
        <button class="btn minus" data-type="cig">−</button>
        <button class="btn plus"  data-type="cig">+</button>
      </div>
      <p class="limit" id="limitCigs"></p>
      <p class="alert hide" id="alertCigs"></p>
    </section>

    <section id="cardWeed" class="card hide">
      <h2>Pétards <span class="pill" id="weedToday">0</span></h2>
      <div class="row">
        <button class="btn minus" data-type="weed">−</button>
        <button class="btn plus"  data-type="weed">+</button>
      </div>
      <p class="limit" id="limitWeed"></p>
      <p class="alert hide" id="alertWeed"></p>
    </section>

    <section id="cardAlcohol" class="card hide">
      <h2>Alcool <span class="pill" id="alcoToday">0</span></h2>
      <div class="row">
        <button class="btn minus" data-type="beer">Bière −</button>
        <button class="btn plus"  data-type="beer">Bière +</button>

        <button class="btn minus" data-type="strong">Alcool fort −</button>
        <button class="btn plus"  data-type="strong">Alcool fort +</button>

        <button class="btn minus" data-type="liquor">Liqueur −</button>
        <button class="btn plus"  data-type="liquor">Liqueur +</button>
      </div>
      <p class="limit" id="limitAlcohol"></p>
      <p class="alert hide" id="alertAlcohol"></p>
    </section>

    <!-- Graphique -->
    <section id="cardChart" class="card">
      <div class="row between">
        <h2>Graphique</h2>
        <div class="segmented">
          <button class="seg" data-range="day">Jour</button>
          <button class="seg" data-range="week">Semaine</button>
          <button class="seg" data-range="month">Mois</button>
        </div>
      </div>
      <div id="chartRoot" class="chart-root" aria-live="polite"></div>
      <p class="muted small">La ligne horizontale indique la limite quotidienne (somme des limites activées).</p>
    </section>

    <!-- Agenda / Journal -->
    <section id="cardAgenda" class="card">
      <div class="row between">
        <h2>Agenda</h2>
        <div class="row">
          <button id="agendaPrev"   class="btn">◀</button>
          <button id="agendaToday"  class="btn">Aujourd’hui</button>
          <button id="agendaNext"   class="btn">▶</button>
        </div>
      </div>
      <h3 id="agendaDate" class="agenda-date">—</h3>
      <ul id="agendaList" class="agenda-list"></ul>
      <p id="agendaEmpty" class="muted small hide">Aucune entrée ce jour.</p>
    </section>

    <!-- Réglages rapides -->
    <section class="card">
      <h2>Réglages rapides</h2>
      <div class="grid2">
        <div>
          <h3>Prix</h3>
          <label>Prix paquet (€) <input type="number" step="0.1" id="pricePack"></label>
          <label>Clopes / paquet <input type="number" id="cigsPerPack"></label>
          <label>Prix joint (€) <input type="number" step="0.1" id="priceJoint"></label>
          <label>Prix bière (€) <input type="number" step="0.1" id="priceBeer"></label>
          <label>Prix alcool fort (€) <input type="number" step="0.1" id="priceStrong"></label>
          <label>Prix liqueur (€) <input type="number" step="0.1" id="priceLiquor"></label>
        </div>
        <div>
          <h3>Limites / jour</h3>
          <label>Clopes <input type="number" id="limitDayCigs"></label>
          <label>Joints <input type="number" id="limitDayWeed"></label>
          <label>Verres (total) <input type="number" id="limitDayAlcohol"></label>
          <p class="muted small">Si une limite est définie, un rappel s’affiche quand tu la dépasses.</p>
        </div>
      </div>
      <div class="row">
        <button id="btnSaveSettings" class="btn primary">Enregistrer</button>
      </div>
    </section>

    <!-- Import / Export -->
    <section class="card">
      <h2>Import / Export</h2>
      <div class="row">
        <button id="btnImport">Importer JSON</button>
        <input id="fileJson" type="file" accept="application/json" hidden />
        <button id="btnExport">Exporter CSV</button>
      </div>
      <p id="feedback" class="feedback" role="status" aria-live="polite"></p>
      <pre id="preview" hidden></pre>
    </section>

    <!-- Économies (disclaimer) -->
    <section class="card">
      <h2>Économies estimées</h2>
      <div id="economies-amount">—</div>
      <p class="muted small">
        Estimation basée sur tes réglages et tes saisies. Ne reflète pas forcément la réalité :
        honnêteté d’usage, façon de gérer l’argent, etc.
      </p>
    </section>
  </main>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
