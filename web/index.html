<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StopAddict</title>
  <link rel="stylesheet" href="./css/app.css" />
</head>
<body>

  <!-- Wrapper type "app" (aspect mobile) -->
  <div class="app">

    <!-- Header -->
    <header class="app-header">
      <div class="header-left">
        <h1 id="app-title">StopAddict</h1>
        <div class="date-line">
          <span id="today-date"></span>
          <span id="hdr-status" class="status-dot" title="Statut"></span>
        </div>
      </div>
      <div class="header-right kpis">
        <div class="kpi"><span>üö¨</span> <strong id="hdr-cigs">0</strong></div>
        <div class="kpi"><span>üåø</span> <strong id="hdr-joints">0</strong></div>
        <div class="kpi"><span>üç∫+üç∑</span> <strong id="hdr-alcohol">0</strong></div>
        <div class="kpi"><span>‚Ç¨</span> <strong id="hdr-cost">0,00‚Ç¨</strong></div>
        <div class="kpi"><span>üí∂</span> <strong id="hdr-saved">0,00‚Ç¨</strong></div>
      </div>
    </header>

    <!-- Tabs -->
    <nav id="tabs" class="tabs">
      <button class="tab active" data-tab="home">Accueil</button>
      <button class="tab" data-tab="stats">Stats</button>
      <button class="tab" data-tab="calendar">Calendrier</button>
      <button class="tab" data-tab="habits">Habitudes</button>
      <button class="tab" data-tab="settings">R√©glages</button>
    </nav>

    <!-- Pages -->
    <main class="pages">

      <!-- Accueil -->
      <section id="page-home">
        <div class="counters-grid">
          <article id="ctr-cigs" class="counter-card">
            <h2>Cigarettes</h2>
            <div class="ctr-row">
              <button class="btn" data-action="dec" data-kind="cigs">‚àí</button>
              <div class="ctr-val" id="val-cigs">0</div>
              <button class="btn" data-action="inc" data-kind="cigs">+</button>
            </div>
            <label class="toggle"><input type="checkbox" id="chk-cigs-active" /> Activer</label>
          </article>

          <article id="ctr-joints" class="counter-card">
            <h2>Joints</h2>
            <div class="ctr-row">
              <button class="btn" data-action="dec" data-kind="joints">‚àí</button>
              <div class="ctr-val" id="val-joints">0</div>
              <button class="btn" data-action="inc" data-kind="joints">+</button>
            </div>
            <label class="toggle"><input type="checkbox" id="chk-joints-active" /> Activer</label>
          </article>

          <article id="ctr-beer" class="counter-card">
            <h2>Bi√®re</h2>
            <div class="ctr-row">
              <button class="btn" data-action="dec" data-kind="beer">‚àí</button>
              <div class="ctr-val" id="val-beer">0</div>
              <button class="btn" data-action="inc" data-kind="beer">+</button>
            </div>
            <label class="toggle"><input type="checkbox" id="chk-beer-active" /> Activer</label>
          </article>

          <article id="ctr-hard" class="counter-card">
            <h2>Alcool fort</h2>
            <div class="ctr-row">
              <button class="btn" data-action="dec" data-kind="hard">‚àí</button>
              <div class="ctr-val" id="val-hard">0</div>
              <button class="btn" data-action="inc" data-kind="hard">+</button>
            </div>
            <label class="toggle"><input type="checkbox" id="chk-hard-active" /> Activer</label>
          </article>

          <article id="ctr-liqueur" class="counter-card">
            <h2>Liqueur</h2>
            <div class="ctr-row">
              <button class="btn" data-action="dec" data-kind="liqueur">‚àí</button>
              <div class="ctr-val" id="val-liqueur">0</div>
              <button class="btn" data-action="inc" data-kind="liqueur">+</button>
            </div>
            <label class="toggle"><input type="checkbox" id="chk-liqueur-active" /> Activer</label>
          </article>
        </div>

        <!-- Conseils -->
        <section id="tips-root" class="tips-panel"></section>
      </section>

      <!-- Stats -->
      <section id="page-stats" class="hide">
        <div class="kpi-block">
          <h3>P√©riode</h3>
          <div id="stats-date">‚Äî</div>
        </div>
        <div class="chart-actions">
          <button id="btnPeriod-day" class="btn">Jour</button>
          <button id="btnPeriod-week" class="btn">Semaine</button>
          <button id="btnPeriod-month" class="btn">Mois</button>
          <button id="btnPeriod-year" class="btn">Ann√©e</button>
          <button id="btn-export-csv" class="btn small">Exporter CSV</button>
          <button id="btn-export-json" class="btn small">Exporter JSON</button>
          <label class="btn small">Importer JSON <input id="file-import-json" type="file" accept="application/json" hidden /></label>
        </div>
        <div class="chart-block"><canvas id="chart-qty"></canvas></div>
        <div class="chart-block" style="margin-top:.6rem;"><canvas id="chart-money"></canvas></div>
      </section>

      <!-- Calendrier -->
      <section id="page-calendar" class="hide">
        <div class="calendar-toolbar">
          <div class="toolbar-left">
            <button id="cal-prev" class="btn small">‚óÄ</button>
            <div id="cal-title" class="cal-title">‚Äî</div>
            <button id="cal-next" class="btn small">‚ñ∂</button>
          </div>
          <div class="toolbar-right cal-filters">
            <label><input type="checkbox" data-cal-filter="cigs" checked /> üö¨</label>
            <label><input type="checkbox" data-cal-filter="joints" checked /> üåø</label>
            <label><input type="checkbox" data-cal-filter="beer" checked /> üç∫</label>
            <label><input type="checkbox" data-cal-filter="hard" checked /> ü•É</label>
            <label><input type="checkbox" data-cal-filter="liqueur" checked /> üç∏</label>
          </div>
        </div>
        <div id="calendar-grid" class="cal-grid"></div>
        <div id="calendar-details" class="cal-details"></div>
        <div class="cal-links">
          <button id="cal-open-stats" class="btn small">Ouvrir Stats</button>
          <button id="cal-open-habits" class="btn small">Ouvrir Habitudes</button>
        </div>
      </section>

      <!-- Habitudes -->
      <section id="page-habits" class="hide">
        <h2 class="section-title">Objectifs par jour</h2>
        <div class="grid-2">
          <label>Cigarettes <input id="goal-cigs" type="number" min="0" /></label>
          <label>Joints <input id="goal-joints" type="number" min="0" /></label>
          <label>Bi√®re <input id="goal-beer" type="number" min="0" /></label>
          <label>Alcool fort <input id="goal-hard" type="number" min="0" /></label>
          <label>Liqueur <input id="goal-liqueur" type="number" min="0" /></label>
        </div>
        <div class="actions">
          <button id="btn-habits-save" class="btn">Enregistrer</button>
          <button id="btn-habits-reset" class="btn">R√©initialiser</button>
        </div>

        <h2 class="section-title">Dates cl√©s</h2>
        <div class="grid-2">
          <label>Arr√™t global <input id="date-stop-global" type="date" /></label>
          <label>Arr√™t alcool <input id="date-stop-alcohol" type="date" /></label>

          <label>Arr√™t clopes (d√©but r√©duction) <input id="date-reduce-cigs" type="date" /></label>
          <label>Arr√™t clopes (objectif) <input id="date-quit-cigs-obj" type="date" /></label>
          <label>Clopes : plus jamais apr√®s <input id="date-nomore-cigs" type="date" /></label>

          <label>Arr√™t joints (d√©but r√©duction) <input id="date-reduce-joints" type="date" /></label>
          <label>Arr√™t joints (objectif) <input id="date-quit-joints-obj" type="date" /></label>
          <label>Joints : plus jamais apr√®s <input id="date-nomore-joints" type="date" /></label>

          <label>Alcool (d√©but r√©duction) <input id="date-reduce-alcohol" type="date" /></label>
          <label>Alcool (objectif arr√™t) <input id="date-quit-alcohol-obj" type="date" /></label>
          <label>Alcool : plus jamais apr√®s <input id="date-nomore-alcohol" type="date" /></label>
        </div>
      </section>

      <!-- R√©glages -->
      <section id="page-settings" class="hide">
        <h2 class="section-title">Profil</h2>
        <div class="grid-2">
          <label>Pr√©nom <input id="profile-name" type="text" placeholder="Votre pr√©nom" /></label>
          <label>Langue <select id="select-language"></select></label>
        </div>

        <h2 class="section-title">Devise</h2>
        <div class="grid-2">
          <label>Symbole <input id="currency-symbol" type="text" value="‚Ç¨" /></label>
          <div>Position :
            <label><input type="radio" name="cur-pos" id="currency-before" /> Avant</label>
            <label><input type="radio" name="cur-pos" id="currency-after" /> Apr√®s</label>
          </div>
        </div>
        <div class="actions"><button id="btn-apply-currency" class="btn">Appliquer</button></div>

        <h2 class="section-title">Modules</h2>
        <div class="grid-2">
          <label><input type="checkbox" id="mod-cigs" /> Cigarettes</label>
          <label><input type="checkbox" id="mod-joints" /> Joints</label>
          <label><input type="checkbox" id="mod-beer" /> Bi√®re</label>
          <label><input type="checkbox" id="mod-hard" /> Alcool fort</label>
          <label><input type="checkbox" id="mod-liqueur" /> Liqueur</label>
          <label><input type="checkbox" id="mod-alcohol" /> Alcool (global)</label>
        </div>

        <h2 class="section-title">Prix unitaires</h2>
        <div class="grid-2">
          <label>Cigarette (‚Ç¨) <input id="price-cigarette" type="number" min="0" step="0.01" /></label>
          <label>Joint (‚Ç¨) <input id="price-joint" type="number" min="0" step="0.01" /></label>
          <label>Bi√®re (‚Ç¨) <input id="price-beer" type="number" min="0" step="0.01" /></label>
          <label>Alcool fort (‚Ç¨) <input id="price-hard" type="number" min="0" step="0.01" /></label>
          <label>Liqueur (‚Ç¨) <input id="price-liqueur" type="number" min="0" step="0.01" /></label>
        </div>
        <div class="actions">
          <button id="btn-save-prices" class="btn">Enregistrer les prix</button>
          <button id="btn-reset-prices" class="btn">R√©initialiser les prix</button>
        </div>

        <h2 class="section-title">Maintenance & sauvegardes</h2>
        <div class="actions">
          <button id="btn-raz-day" class="btn">RAZ du jour</button>
          <button id="btn-raz-history" class="btn">RAZ historique</button>
          <button id="btn-raz-factory" class="btn">RAZ r√©glages (usine)</button>
        </div>
        <div class="actions">
          <button id="btn-save-json-settings" class="btn">Sauvegarder JSON</button>
          <label class="btn">Importer JSON <input id="file-import-json-settings" type="file" accept="application/json" hidden /></label>
        </div>

        <h2 class="section-title">Journal & Debug</h2>
        <label><input type="checkbox" id="cb-debug-overlay" /> Afficher la console</label>
        <div class="actions">
          <button id="btn-copy-logs" class="btn">Copier les logs</button>
          <button id="btn-clear-logs" class="btn">Vider les logs</button>
          <button id="btn-resources" class="btn">Ressources & num√©ros utiles</button>
        </div>

        <div id="debug-console" class="hide"></div>
      </section>

    </main>
  </div><!-- /.app -->

  <!-- Age gate (pas de lien Ressources statique ici) -->
  <dialog id="agegate" class="hide">
    <form method="dialog" class="agegate">
      <h3>+18</h3>
      <p>J'ai plus de 18 ans.</p>
      <label><input type="checkbox" id="age-18plus" /> Oui</label>
      <label><input type="checkbox" id="age-hide" /> Ne plus afficher</label>
      <div class="actions"><button id="btn-age-accept" class="btn" disabled>Entrer</button></div>
    </form>
  </dialog>

  <!-- Vendor -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <!-- App (unique point d‚Äôentr√©e) -->
  <script type="module" src="./js/app.js"></script>
</body>
</html>
