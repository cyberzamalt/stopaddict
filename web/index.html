<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>StopAddict</title>

  <!-- CSS -->
  <link rel="stylesheet" href="css/app.css?v=5">

  <!-- Libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>

  <!-- App -->
  <script type="module" src="js/app.js?v=5" defer></script>
</head>
<body>

  <!-- Header -->
  <header class="app-header">
    <div class="header-left">
      <h1 id="app-title">StopAddict</h1>
      <div class="date-line">
        <span id="today-date"></span>
        <span id="hdr-status" class="status-dot" title="Statut"></span>
      </div>
    </div>
    <div class="header-right kpis">
      <div class="kpi"><span>üö¨</span> <strong id="hdr-cigs">0</strong></div>
      <div class="kpi"><span>üåø</span> <strong id="hdr-joints">0</strong></div>
      <div class="kpi"><span>üç∫+üç∑</span> <strong id="hdr-alcohol">0</strong></div>
      <div class="kpi"><span>‚Ç¨</span> <strong id="hdr-cost">0,00‚Ç¨</strong></div>
      <div class="kpi"><span>üí∂</span> <strong id="hdr-saved">0,00‚Ç¨</strong></div>
    </div>
  </header>

  <!-- Tabs -->
  <nav id="tabs" class="tabs">
    <button class="tab active" data-tab="home">Accueil</button>
    <button class="tab" data-tab="stats">Stats</button>
    <button class="tab" data-tab="calendar">Calendrier</button>
    <button class="tab" data-tab="habits">Habitudes</button>
    <button class="tab" data-tab="settings">R√©glages</button>
  </nav>

  <main class="pages">
    <!-- Accueil -->
    <section id="page-home">
      <div class="counters-grid">

        <div id="ctr-cigs" class="counter-card">
          <h2>Cigarettes</h2>
          <div class="ctr-row">
            <button class="btn small" data-action="dec" data-kind="cigs">‚àí</button>
            <div id="val-cigs" class="ctr-val">0</div>
            <button class="btn small" data-action="inc" data-kind="cigs">+</button>
          </div>
          <label class="toggle"><input type="checkbox" id="chk-cigs-active"> Activer</label>
        </div>

        <div id="ctr-joints" class="counter-card">
          <h2>Joints</h2>
          <div class="ctr-row">
            <button class="btn small" data-action="dec" data-kind="joints">‚àí</button>
            <div id="val-joints" class="ctr-val">0</div>
            <button class="btn small" data-action="inc" data-kind="joints">+</button>
          </div>
          <label class="toggle"><input type="checkbox" id="chk-joints-active"> Activer</label>
        </div>

        <div id="ctr-beer" class="counter-card">
          <h2>Bi√®re</h2>
          <div class="ctr-row">
            <button class="btn small" data-action="dec" data-kind="beer">‚àí</button>
            <div id="val-beer" class="ctr-val">0</div>
            <button class="btn small" data-action="inc" data-kind="beer">+</button>
          </div>
          <label class="toggle"><input type="checkbox" id="chk-beer-active"> Activer</label>
        </div>

        <div id="ctr-hard" class="counter-card">
          <h2>Alcool fort</h2>
          <div class="ctr-row">
            <button class="btn small" data-action="dec" data-kind="hard">‚àí</button>
            <div id="val-hard" class="ctr-val">0</div>
            <button class="btn small" data-action="inc" data-kind="hard">+</button>
          </div>
          <label class="toggle"><input type="checkbox" id="chk-hard-active"> Activer</label>
        </div>

        <div id="ctr-liqueur" class="counter-card">
          <h2>Liqueur</h2>
          <div class="ctr-row">
            <button class="btn small" data-action="dec" data-kind="liqueur">‚àí</button>
            <div id="val-liqueur" class="ctr-val">0</div>
            <button class="btn small" data-action="inc" data-kind="liqueur">+</button>
          </div>
          <label class="toggle"><input type="checkbox" id="chk-liqueur-active"> Activer</label>
        </div>

      </div>

      <!-- Conseils -->
      <div class="tips-panel">
        <div class="tips-card">
          <h3>Conseils</h3>
          <div id="tips-list">
            <!-- Rempli dynamiquement -->
          </div>
        </div>
      </div>
    </section>

    <!-- Stats -->
    <section id="page-stats" class="hide">
      <div class="section-title">P√©riode ‚Äî <span id="stats-date">‚Äî</span></div>
      <div class="chart-actions">
        <button id="btnPeriod-day" class="btn">Jour</button>
        <button id="btnPeriod-week" class="btn">Semaine</button>
        <button id="btnPeriod-month" class="btn">Mois</button>
        <button id="btnPeriod-year" class="btn">Ann√©e</button>
        <button id="btn-export-csv" class="btn">Exporter CSV</button>
        <button id="btn-export-json" class="btn">Exporter JSON</button>
        <label class="btn">
          Importer JSON
          <input id="file-import-json" type="file" accept="application/json" style="display:none">
        </label>
      </div>
      <div class="chart-block">
        <canvas id="chart-main"></canvas>
      </div>
    </section>

    <!-- Calendrier -->
    <section id="page-calendar" class="hide">
      <div id="calendar-root"></div>
    </section>

    <!-- Habitudes -->
    <section id="page-habits" class="hide">
      <div class="section-title">Objectifs par jour</div>
      <div class="grid-2">
        <label>Cigarettes <input id="goal-cigs" type="number" min="0" value="0"></label>
        <label>Joints <input id="goal-joints" type="number" min="0" value="0"></label>
        <label>Bi√®re <input id="goal-beer" type="number" min="0" value="0"></label>
        <label>Alcool fort <input id="goal-hard" type="number" min="0" value="0"></label>
        <label>Liqueur <input id="goal-liqueur" type="number" min="0" value="0"></label>
      </div>
      <div class="actions">
        <button id="btn-habits-save" class="btn">Enregistrer</button>
        <button id="btn-habits-reset" class="btn">R√©initialiser</button>
      </div>

      <div class="section-title">Dates cl√©s</div>
      <div class="grid-2">
        <label>Arr√™t global <input id="date-stop-global" type="date"></label>
        <label>Arr√™t alcool <input id="date-stop-alcohol" type="date"></label>

        <label>Arr√™t clopes (d√©but r√©duction) <input id="date-reduce-cigs" type="date"></label>
        <label>Arr√™t clopes (objectif) <input id="date-quit-cigs-obj" type="date"></label>
        <label>Clopes : plus jamais apr√®s <input id="date-nomore-cigs" type="date"></label>

        <label>Arr√™t joints (d√©but r√©duction) <input id="date-reduce-joints" type="date"></label>
        <label>Arr√™t joints (objectif) <input id="date-quit-joints-obj" type="date"></label>
        <label>Joints : plus jamais apr√®s <input id="date-nomore-joints" type="date"></label>

        <label>Alcool (d√©but r√©duction) <input id="date-reduce-alcohol" type="date"></label>
        <label>Alcool (objectif arr√™t) <input id="date-quit-alcohol-obj" type="date"></label>
        <label>Alcool : plus jamais apr√®s <input id="date-nomore-alcohol" type="date"></label>
      </div>
    </section>

    <!-- R√©glages -->
    <section id="page-settings" class="hide">
      <div class="section-title">Profil</div>
      <div class="grid-2">
        <label>Pr√©nom <input id="profile-name" type="text" placeholder="Ton pr√©nom"></label>
        <label>Langue
          <select id="select-language">
            <option value="fr">Fran√ßais</option>
            <option value="en">English</option>
          </select>
        </label>
      </div>

      <div class="section-title">Devise</div>
      <div class="grid-2">
        <label>Symbole <input id="currency-symbol" type="text" value="‚Ç¨" maxlength="3"></label>
        <label>Position :
          <span>
            <input type="radio" name="curpos" id="currency-before" checked> Avant
            <input type="radio" name="curpos" id="currency-after"> Apr√®s
          </span>
        </label>
      </div>
      <div class="actions"><button id="btn-apply-currency" class="btn">Appliquer</button></div>

      <div class="section-title">Modules</div>
      <div class="grid-2">
        <label><span>Cigarettes</span> <input id="mod-cigs" type="checkbox"></label>
        <label><span>Joints</span> <input id="mod-joints" type="checkbox"></label>
        <label><span>Bi√®re</span> <input id="mod-beer" type="checkbox"></label>
        <label><span>Alcool fort</span> <input id="mod-hard" type="checkbox"></label>
        <label><span>Liqueur</span> <input id="mod-liqueur" type="checkbox"></label>
        <label><span>Alcool (global)</span> <input id="mod-alcohol" type="checkbox"></label>
      </div>

      <div class="section-title">Prix unitaires</div>
      <div class="grid-2">
        <label>Cigarette (‚Ç¨) <input id="price-cigarette" type="number" step="0.01" min="0"></label>
        <label>Joint (‚Ç¨) <input id="price-joint" type="number" step="0.01" min="0"></label>
        <label>Bi√®re (‚Ç¨) <input id="price-beer" type="number" step="0.01" min="0"></label>
        <label>Alcool fort (‚Ç¨) <input id="price-hard" type="number" step="0.01" min="0"></label>
        <label>Liqueur (‚Ç¨) <input id="price-liqueur" type="number" step="0.01" min="0"></label>
      </div>
      <div class="actions">
        <button id="btn-save-prices" class="btn">Enregistrer les prix</button>
        <button id="btn-reset-prices" class="btn">R√©initialiser les prix</button>
      </div>

      <div class="section-title">Maintenance & sauvegardes</div>
      <div class="actions">
        <button id="btn-raz-day" class="btn">RAZ du jour</button>
        <button id="btn-raz-history" class="btn">RAZ historique</button>
        <button id="btn-raz-factory" class="btn">RAZ r√©glages (usine)</button>
      </div>
      <div class="actions">
        <button id="btn-save-json-settings" class="btn">Sauvegarder JSON</button>
        <label class="btn">
          Importer JSON
          <input id="file-import-json-settings" type="file" accept="application/json" style="display:none">
        </label>
      </div>

      <div class="section-title">Journal & Debug</div>
      <label class="toggle"><input type="checkbox" id="cb-debug-overlay"> Afficher la console</label>
      <div class="actions">
        <button id="btn-copy-logs" class="btn">Copier les logs</button>
        <button id="btn-clear-logs" class="btn">Vider les logs</button>
        <button id="btn-resources" class="btn">Ressources & num√©ros utiles</button>
      </div>
      <div id="debug-console" class="hide"></div>
    </section>
  </main>

  <!-- Age-gate -->
  <dialog id="agegate" class="agegate hide">
    <h3>+18</h3>
    <p>J‚Äôai plus de 18 ans.</p>
    <div class="actions">
      <label><input type="checkbox" id="age-18plus"> Oui</label>
      <label><input type="checkbox" id="age-hide"> Ne plus afficher</label>
      <button id="btn-age-accept" class="btn">Entrer</button>
    </div>
  </dialog>

</body>
</html>
